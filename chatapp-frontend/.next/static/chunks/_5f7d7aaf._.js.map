{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/thanhnguyen/Documents/ChatApp/chatapp-frontend/lib/api.ts"],"sourcesContent":["import axios from \"axios\";\n\nconst api=axios.create({\n    baseURL:\"http://localhost:4000/api\",\n})\nexport default api;"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,MAAI,mJAAK,CAAC,MAAM,CAAC;IACnB,SAAQ;AACZ;uCACe","debugId":null}},
    {"offset": {"line": 21, "column": 0}, "map": {"version":3,"sources":["file:///home/thanhnguyen/Documents/ChatApp/chatapp-frontend/lib/socket.ts"],"sourcesContent":["import {io} from \"socket.io-client\";\n\nconst socket=io(\"http://localhost:4000\", {\n    withCredentials:true\n})\n\nexport default socket;"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,SAAO,IAAA,wLAAE,EAAC,yBAAyB;IACrC,iBAAgB;AACpB;uCAEe","debugId":null}},
    {"offset": {"line": 38, "column": 0}, "map": {"version":3,"sources":["file:///home/thanhnguyen/Documents/ChatApp/chatapp-frontend/components/MessageInput.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState } from \"react\";\n\ninterface SuggestingProps{\n    suggestions: string[];\n    onPick: (text:string)=>void;\n}\n\n\nfunction Suggestions({suggestions,onPick}:SuggestingProps){\n    if(suggestions.length==0)return null;\n    return(\n        <div className=\"flex gap-2 mt-2 flex-wrap\">\n            {suggestions.map((s,i)=>(\n                <button\n                    key={i}\n                    className=\"bg-gray-200 hover:bg-gray-300 px-3 py-1 rounded-full text-sm\"\n                    onClick={()=>onPick(s)}>{s}\n                </button>\n            ))}\n        </div>\n    )\n}\n\n\n//pass a func\nexport default function MessageInput({onSend}:{onSend:(msg:string)=>void}){\n    const [message,setMessage]=useState(\"\")\n    const [suggestions,setSuggestions]=useState<string[]>([]);\n    const [loading,setLoading]=useState(false)\n\n    async function fetchSuggestion(text:string){\n        setLoading(true);\n        try{\n            const res=await fetch(\"/api/suggest\",{\n                method:\"POST\",\n                body:JSON.stringify({text}),\n                headers:{\"Content-Type\":\"application/json\"}\n            });\n            const data=await res.json();\n            setSuggestions(data);\n        }\n        catch(err){\n            alert(\"AI Suggestion Error: \"+err);\n        }\n        finally{\n            setLoading(false);\n        }\n    }\n    function handleSend(){\n        if(message.trim()==\"\")return;\n        onSend(message);\n        setMessage(\"\");\n        setSuggestions([]);\n        fetchSuggestion(message);\n    }\n    return(\n        <div className=\"border-t p-2\">\n            <div className=\"flex\">\n                <input className=\"flex-1 border p-2 rounded\"\n                        value={message} onChange={(e)=>setMessage(e.target.value)}\n                        placeholder=\"Type your message...\"/>\n                <button onClick={handleSend} className=\"ml-2 bg-blue-500 text-white px-4 rounded\">Send</button>\n            </div>\n            <Suggestions suggestions={suggestions} onPick={(text)=>setMessage(text)}/>\n        </div>\n    )\n}"],"names":[],"mappings":";;;;;AAEA;;;AAFA;;AAUA,SAAS,YAAY,KAAoC;QAApC,EAAC,WAAW,EAAC,MAAM,EAAiB,GAApC;IACjB,IAAG,YAAY,MAAM,IAAE,GAAE,OAAO;IAChC,qBACI,6LAAC;QAAI,WAAU;kBACV,YAAY,GAAG,CAAC,CAAC,GAAE,kBAChB,6LAAC;gBAEG,WAAU;gBACV,SAAS,IAAI,OAAO;0BAAK;eAFpB;;;;;;;;;;AAOzB;KAbS;AAiBM,SAAS,aAAa,KAAoC;QAApC,EAAC,MAAM,EAA6B,GAApC;;IACjC,MAAM,CAAC,SAAQ,WAAW,GAAC,IAAA,yKAAQ,EAAC;IACpC,MAAM,CAAC,aAAY,eAAe,GAAC,IAAA,yKAAQ,EAAW,EAAE;IACxD,MAAM,CAAC,SAAQ,WAAW,GAAC,IAAA,yKAAQ,EAAC;IAEpC,eAAe,gBAAgB,IAAW;QACtC,WAAW;QACX,IAAG;YACC,MAAM,MAAI,MAAM,MAAM,gBAAe;gBACjC,QAAO;gBACP,MAAK,KAAK,SAAS,CAAC;oBAAC;gBAAI;gBACzB,SAAQ;oBAAC,gBAAe;gBAAkB;YAC9C;YACA,MAAM,OAAK,MAAM,IAAI,IAAI;YACzB,eAAe;QACnB,EACA,OAAM,KAAI;YACN,MAAM,0BAAwB;QAClC,SACO;YACH,WAAW;QACf;IACJ;IACA,SAAS;QACL,IAAG,QAAQ,IAAI,MAAI,IAAG;QACtB,OAAO;QACP,WAAW;QACX,eAAe,EAAE;QACjB,gBAAgB;IACpB;IACA,qBACI,6LAAC;QAAI,WAAU;;0BACX,6LAAC;gBAAI,WAAU;;kCACX,6LAAC;wBAAM,WAAU;wBACT,OAAO;wBAAS,UAAU,CAAC,IAAI,WAAW,EAAE,MAAM,CAAC,KAAK;wBACxD,aAAY;;;;;;kCACpB,6LAAC;wBAAO,SAAS;wBAAY,WAAU;kCAA2C;;;;;;;;;;;;0BAEtF,6LAAC;gBAAY,aAAa;gBAAa,QAAQ,CAAC,OAAO,WAAW;;;;;;;;;;;;AAG9E;GAzCwB;MAAA","debugId":null}},
    {"offset": {"line": 160, "column": 0}, "map": {"version":3,"sources":["file:///home/thanhnguyen/Documents/ChatApp/chatapp-frontend/components/ChatWindow.tsx"],"sourcesContent":["\"use client\";\n\nimport api from \"@/lib/api\";\nimport socket from \"@/lib/socket\";\nimport { useEffect, useRef, useState } from \"react\";\nimport MessageInput from \"./MessageInput\";\n\ntype Message={\n    _id?:string;\n    sender:string;\n    content:string;\n    room:string;\n    createAt?:string;\n}\n\nexport default function ChatWindow({room}:{room:string}) {\n    const [messages,setMessages]=useState<Message[]>([]);\n    const [loading,setLoading]=useState(false);\n    const [user,setUsers]=useState<string[]>([]);\n    const bottomRef=useRef<HTMLDivElement|null>(null);\n\n    //get username from local storage\n    const username=typeof window!==\"undefined\"?localStorage.getItem(\"username\")||\"Anonymous\":\"Anonymous\";\n\n    useEffect(()=>{\n        if(!room) return;\n        let mounted=true;\n        async function loadHistory() {\n            setLoading(true);\n            try{\n                const res=await api.get(`/messages/${room}`);\n                if(!mounted)return;\n                setMessages(res.data.messages||[]);\n            }\n            catch(err){ alert(\"Load messages failed\");}\n            finally {if(mounted)setLoading(false);}\n        }\n        loadHistory();\n        \n        //join room\n        socket.emit(\"join_room\",room);\n\n        //listener\n        function onReceive(msg:Message){\n            if(msg.room===room)setMessages(prev=>[...prev,msg]);\n        }\n        function onRoomUsers(list:string[]){\n            setUsers(list);\n        }\n        socket.on(\"receive_message\",onReceive);\n        socket.on(\"room_users\",onRoomUsers);\n        return()=>{\n            mounted=false;\n            socket.emit(\"leave_room\",{room,username});\n            socket.off(\"receive_message\",onReceive);\n            socket.off(\"room_users\",onRoomUsers);\n        }\n    },[room,username])\n    useEffect(()=>{\n        bottomRef.current?.scrollIntoView({behavior:\"smooth\"});\n    },[messages])\n    async function handleSend(msg:string){\n        if(msg.trim()===\"\")return;\n        const payload: Message={\n            sender:username,\n            content:msg,\n            room,\n        }\n        socket.emit(\"send_message\",payload);\n        setMessages((prev)=>[...prev,{...payload,createAt:new Date().toISOString()}]);\n    }\n    return(\n        <div className=\"flex-1 flex flex-col h-full \">\n            <div className=\"border-b p-3 flex itmes-center justify-between\">\n                <div>\n                    <h3 className=\"font-semibold\">{room||\"Select a room\"}</h3>\n                    <p className=\"text-sm text-gray-500\">{user.length} online</p>\n                </div>\n            </div>\n\n            <div className=\"flex-1 overflow-y-auto p-3 space-y-3 bg-gray-50\">\n                {loading?(\n                    <p className=\"text-sm text-gray-500\">Loading...</p>\n                ):messages.length===0?(\n                    <p className=\"text-sm text-gray-500\">No messages</p>\n                ):(\n                    messages.map((m,i)=>(\n                        <div key={m._id??i} className={`p-2 rounded ${m.sender===username ? \"bg-blue-100 self-end\":\"bg-white\"}`}>\n                            <div className=\"text-xs text-gray-500\">{m.sender}</div>\n                            <div className=\"mt-1 text-gray-600\">{m.content} </div>\n                            <div className=\"text-xs text-gray-400 mt-1\">{m.createAt ? new Date(m.createAt).toLocaleDateString():\"\"}</div>\n                        </div>\n                    ))\n                )}\n                <div ref={bottomRef}/>\n            </div>\n            <MessageInput onSend={handleSend}/>\n        </div>\n    )\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 391, "column": 0}, "map": {"version":3,"sources":["file:///home/thanhnguyen/Documents/ChatApp/chatapp-frontend/components/Sidebar.tsx"],"sourcesContent":["\"use client\"\n\nimport api from \"@/lib/api\";\nimport { useEffect, useState } from \"react\";\n\ntype Room={\n    _id?:string;\n    name:string\n};\nexport default function Sidebar({\n    currentRoom=\"global\",\n    onSelectRoom=(r)=>console.log(r)\n}:{\n    currentRoom:string,\n    onSelectRoom:(r:string)=>void\n}){\n    const [rooms,setRooms]=useState<Room[]>([]);\n    const [newRoom,setNewRoom]=useState(\"\");\n    const [loading,setLoading]=useState(false);\n\n    async function loadRooms(){\n        setLoading(true);\n        try{\n            const res=await api.get(\"/rooms\");\n            setRooms(res.data.rooms || []);\n        }\n        catch(err){\n            alert(\"Load rooms error: \"+err);\n        }\n        finally{setLoading(false)}\n    }\n    useEffect(()=>{\n        loadRooms();\n    },[])\n    async function createRoom(){\n        const name=newRoom.trim();\n        if(name==\"\")return;\n        try{\n            const res=await api.post(\"/rooms\",{name});\n            setRooms((prev)=>[...prev,res.data.room]);\n            setNewRoom(\"\");\n        }\n        catch(err){\n            alert(\"Create room error: \"+err);\n        }\n    }\n    return(\n        <div className=\"w-75 border-r h-full p-4 flex flex-col\">\n            <h2 className=\"text-lg font-semibold mb-3\">Rooms</h2>\n\n            {/* add room */}\n            <div className=\"flex gap-2 mb-3\">\n                <input className=\"flex-1 border p-1 rounded\" placeholder=\"New room name\" value={newRoom} onChange={(e)=>setNewRoom(e.target.value)}/>\n                <button className=\"bg-blue-500 text-white px-3 rounded\" onClick={createRoom}>Add</button>\n            </div>\n\n            {/* room list */}\n            <div className=\"flex-1 overflow-y-auto\">\n                {loading ? (\n                    <p className=\"text-sm text-gray-500\">Loading...</p>\n                ): rooms.length===0 ?(\n                    <p className=\"text-sm text-gray-500\">No rooms yet</p>\n                ):(\n                    rooms.map((r)=>(\n                        <div key={r.name} onClick={()=>onSelectRoom}\n                        className={`p-2 rounded cursor-pointer mb-1 ${r.name===currentRoom ? \"bg-blue-100\": \"hover:bg-gray-100\"}`}>\n                            <div className=\"font-medium\">{r.name}</div>\n                        </div>\n                    ))\n                )}\n            </div>\n        </div>\n    )\n}"],"names":[],"mappings":";;;;;AAEA;AACA;;;AAHA;;;AASe,SAAS,QAAQ,KAM/B;QAN+B,EAC5B,cAAY,QAAQ,EACpB,eAAa,CAAC,IAAI,QAAQ,GAAG,CAAC,EAAE,EAInC,GAN+B;;IAO5B,MAAM,CAAC,OAAM,SAAS,GAAC,IAAA,yKAAQ,EAAS,EAAE;IAC1C,MAAM,CAAC,SAAQ,WAAW,GAAC,IAAA,yKAAQ,EAAC;IACpC,MAAM,CAAC,SAAQ,WAAW,GAAC,IAAA,yKAAQ,EAAC;IAEpC,eAAe;QACX,WAAW;QACX,IAAG;YACC,MAAM,MAAI,MAAM,wHAAG,CAAC,GAAG,CAAC;YACxB,SAAS,IAAI,IAAI,CAAC,KAAK,IAAI,EAAE;QACjC,EACA,OAAM,KAAI;YACN,MAAM,uBAAqB;QAC/B,SACO;YAAC,WAAW;QAAM;IAC7B;IACA,IAAA,0KAAS;6BAAC;YACN;QACJ;4BAAE,EAAE;IACJ,eAAe;QACX,MAAM,OAAK,QAAQ,IAAI;QACvB,IAAG,QAAM,IAAG;QACZ,IAAG;YACC,MAAM,MAAI,MAAM,wHAAG,CAAC,IAAI,CAAC,UAAS;gBAAC;YAAI;YACvC,SAAS,CAAC,OAAO;uBAAI;oBAAK,IAAI,IAAI,CAAC,IAAI;iBAAC;YACxC,WAAW;QACf,EACA,OAAM,KAAI;YACN,MAAM,wBAAsB;QAChC;IACJ;IACA,qBACI,6LAAC;QAAI,WAAU;;0BACX,6LAAC;gBAAG,WAAU;0BAA6B;;;;;;0BAG3C,6LAAC;gBAAI,WAAU;;kCACX,6LAAC;wBAAM,WAAU;wBAA4B,aAAY;wBAAgB,OAAO;wBAAS,UAAU,CAAC,IAAI,WAAW,EAAE,MAAM,CAAC,KAAK;;;;;;kCACjI,6LAAC;wBAAO,WAAU;wBAAsC,SAAS;kCAAY;;;;;;;;;;;;0BAIjF,6LAAC;gBAAI,WAAU;0BACV,wBACG,6LAAC;oBAAE,WAAU;8BAAwB;;;;;2BACtC,MAAM,MAAM,KAAG,kBACd,6LAAC;oBAAE,WAAU;8BAAwB;;;;;2BAErC,MAAM,GAAG,CAAC,CAAC,kBACP,6LAAC;wBAAiB,SAAS,IAAI;wBAC/B,WAAW,AAAC,mCAA4F,OAA1D,EAAE,IAAI,KAAG,cAAc,gBAAe;kCAChF,cAAA,6LAAC;4BAAI,WAAU;sCAAe,EAAE,IAAI;;;;;;uBAF9B,EAAE,IAAI;;;;;;;;;;;;;;;;AASxC;GAhEwB;KAAA","debugId":null}},
    {"offset": {"line": 535, "column": 0}, "map": {"version":3,"sources":["file:///home/thanhnguyen/Documents/ChatApp/chatapp-frontend/app/page.tsx"],"sourcesContent":["\"use client\";\n\nimport ChatWindow from \"@/components/ChatWindow\";\nimport Sidebar from \"@/components/Sidebar\";\nimport { useState } from \"react\";\n\nexport default function Home() {\n  const[room,setRoom]=useState<string>(\"General\");\n  return (\n    <div className=\"h-screen flex\">\n        <Sidebar currentRoom=\"{room}\" onSelectRoom={(r)=>setRoom(r)}/>\n        <div className=\"flex-1 flex flex-col\">\n          <ChatWindow room={room}/>\n        </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;AAJA;;;;AAMe,SAAS;;IACtB,MAAK,CAAC,MAAK,QAAQ,GAAC,IAAA,yKAAQ,EAAS;IACrC,qBACE,6LAAC;QAAI,WAAU;;0BACX,6LAAC,oIAAO;gBAAC,aAAY;gBAAS,cAAc,CAAC,IAAI,QAAQ;;;;;;0BACzD,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC,uIAAU;oBAAC,MAAM;;;;;;;;;;;;;;;;;AAI5B;GAVwB;KAAA","debugId":null}}]
}