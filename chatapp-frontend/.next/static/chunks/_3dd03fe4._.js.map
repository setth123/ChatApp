{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/thanhnguyen/Documents/ChatApp/chatapp-frontend/components/MessageInput.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState } from \"react\";\n\ninterface SuggestingProps{\n    suggestions: string[];\n    onPick: (text:string)=>void;\n}\n\n\nfunction Suggestions({suggestions,onPick}:SuggestingProps){\n    if(suggestions.length==0)return null;\n    return(\n        <div className=\"flex gap-2 mt-2 flex-wrap\">\n            {suggestions.map((s,i)=>(\n                <button\n                    key={i}\n                    className=\"bg-gray-200 hover:bg-gray-300 px-3 py-1 rounded-full text-sm\"\n                    onClick={()=>onPick(s)}>{s}\n                </button>\n            ))}\n        </div>\n    )\n}\n\n\n//pass a func\nexport default function MessageInput({onSend}:{onSend:(msg:string)=>void}){\n    const [message,setMessage]=useState(\"\")\n    const [suggestions,setSuggestions]=useState<string[]>([]);\n    const [loading,setLoading]=useState(false)\n\n    async function fetchSuggestion(text:string){\n        setLoading(true);\n        try{\n            const res=await fetch(\"/api/suggest\",{\n                method:\"POST\",\n                body:JSON.stringify({text}),\n                headers:{\"Content-Type\":\"application/json\"}\n            });\n            const data=await res.json();\n            setSuggestions(data);\n        }\n        catch(err){\n            alert(\"AI Suggestion Error: \"+err);\n        }\n        finally{\n            setLoading(false);\n        }\n    }\n    function handleSend(){\n        if(message.trim()==\"\")return;\n        onSend(message);\n        setMessage(\"\");\n        setSuggestions([]);\n        fetchSuggestion(message);\n    }\n    return(\n        <div className=\"border-t p-2\">\n            <div className=\"flex\">\n                <input className=\"flex-1 border p-2 rounded\"\n                        value={message} onChange={(e)=>setMessage(e.target.value)}\n                        placeholder=\"Type your message...\"/>\n                <button onClick={handleSend} className=\"ml-2 bg-blue-500 text-white px-4 rounded\">Send</button>\n            </div>\n            <Suggestions suggestions={suggestions} onPick={(text)=>setMessage(text)}/>\n        </div>\n    )\n}"],"names":[],"mappings":";;;;;AAEA;;;AAFA;;AAUA,SAAS,YAAY,KAAoC;QAApC,EAAC,WAAW,EAAC,MAAM,EAAiB,GAApC;IACjB,IAAG,YAAY,MAAM,IAAE,GAAE,OAAO;IAChC,qBACI,6LAAC;QAAI,WAAU;kBACV,YAAY,GAAG,CAAC,CAAC,GAAE,kBAChB,6LAAC;gBAEG,WAAU;gBACV,SAAS,IAAI,OAAO;0BAAK;eAFpB;;;;;;;;;;AAOzB;KAbS;AAiBM,SAAS,aAAa,KAAoC;QAApC,EAAC,MAAM,EAA6B,GAApC;;IACjC,MAAM,CAAC,SAAQ,WAAW,GAAC,IAAA,yKAAQ,EAAC;IACpC,MAAM,CAAC,aAAY,eAAe,GAAC,IAAA,yKAAQ,EAAW,EAAE;IACxD,MAAM,CAAC,SAAQ,WAAW,GAAC,IAAA,yKAAQ,EAAC;IAEpC,eAAe,gBAAgB,IAAW;QACtC,WAAW;QACX,IAAG;YACC,MAAM,MAAI,MAAM,MAAM,gBAAe;gBACjC,QAAO;gBACP,MAAK,KAAK,SAAS,CAAC;oBAAC;gBAAI;gBACzB,SAAQ;oBAAC,gBAAe;gBAAkB;YAC9C;YACA,MAAM,OAAK,MAAM,IAAI,IAAI;YACzB,eAAe;QACnB,EACA,OAAM,KAAI;YACN,MAAM,0BAAwB;QAClC,SACO;YACH,WAAW;QACf;IACJ;IACA,SAAS;QACL,IAAG,QAAQ,IAAI,MAAI,IAAG;QACtB,OAAO;QACP,WAAW;QACX,eAAe,EAAE;QACjB,gBAAgB;IACpB;IACA,qBACI,6LAAC;QAAI,WAAU;;0BACX,6LAAC;gBAAI,WAAU;;kCACX,6LAAC;wBAAM,WAAU;wBACT,OAAO;wBAAS,UAAU,CAAC,IAAI,WAAW,EAAE,MAAM,CAAC,KAAK;wBACxD,aAAY;;;;;;kCACpB,6LAAC;wBAAO,SAAS;wBAAY,WAAU;kCAA2C;;;;;;;;;;;;0BAEtF,6LAAC;gBAAY,aAAa;gBAAa,QAAQ,CAAC,OAAO,WAAW;;;;;;;;;;;;AAG9E;GAzCwB;MAAA","debugId":null}},
    {"offset": {"line": 126, "column": 0}, "map": {"version":3,"sources":["file:///home/thanhnguyen/Documents/ChatApp/chatapp-frontend/lib/api.ts"],"sourcesContent":["import axios from \"axios\";\n\nconst api=axios.create({\n    baseURL:\"http://localhost:4000/api\",\n})\nexport default api;"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,MAAI,mJAAK,CAAC,MAAM,CAAC;IACnB,SAAQ;AACZ;uCACe","debugId":null}},
    {"offset": {"line": 143, "column": 0}, "map": {"version":3,"sources":["file:///home/thanhnguyen/Documents/ChatApp/chatapp-frontend/components/Sidebar.tsx"],"sourcesContent":["\"use client\"\n\nimport api from \"@/lib/api\";\nimport { useEffect, useState } from \"react\";\n\ntype Room={\n    _id?:string;\n    name:string\n};\nexport default function Sidebar({\n    currentRoom=\"global\",\n    onSelectRoom=(r)=>console.log(r)\n}:{\n    currentRoom:string,\n    onSelectRoom:(r:string)=>void\n}){\n    const [rooms,setRooms]=useState<Room[]>([]);\n    const [newRoom,setNewRoom]=useState(\"\");\n    const [loading,setLoading]=useState(false);\n\n    async function loadRooms(){\n        setLoading(true);\n        try{\n            const res=await api.get(\"/rooms\");\n            setRooms(res.data.rooms || []);\n        }\n        catch(err){\n            alert(\"Load rooms error: \"+err);\n        }\n        finally{setLoading(false)}\n    }\n    useEffect(()=>{\n        loadRooms();\n    },[])\n    async function createRoom(){\n        const name=newRoom.trim();\n        if(name==\"\")return;\n        try{\n            const res=await api.post(\"/rooms\",{name});\n            setRooms((prev)=>[...prev,res.data.room]);\n            setNewRoom(\"\");\n        }\n        catch(err){\n            alert(\"Create room error: \"+err);\n        }\n    }\n    return(\n        <div className=\"w-64 border-r h-full p-4 flex flex-col\">\n            <h2>Rooms</h2>\n        </div>\n    )\n}"],"names":[],"mappings":";;;;;AAEA;AACA;;;AAHA;;;AASe,SAAS,QAAQ,KAM/B;QAN+B,EAC5B,cAAY,QAAQ,EACpB,eAAa,CAAC,IAAI,QAAQ,GAAG,CAAC,EAAE,EAInC,GAN+B;;IAO5B,MAAM,CAAC,OAAM,SAAS,GAAC,IAAA,yKAAQ,EAAS,EAAE;IAC1C,MAAM,CAAC,SAAQ,WAAW,GAAC,IAAA,yKAAQ,EAAC;IACpC,MAAM,CAAC,SAAQ,WAAW,GAAC,IAAA,yKAAQ,EAAC;IAEpC,eAAe;QACX,WAAW;QACX,IAAG;YACC,MAAM,MAAI,MAAM,wHAAG,CAAC,GAAG,CAAC;YACxB,SAAS,IAAI,IAAI,CAAC,KAAK,IAAI,EAAE;QACjC,EACA,OAAM,KAAI;YACN,MAAM,uBAAqB;QAC/B,SACO;YAAC,WAAW;QAAM;IAC7B;IACA,IAAA,0KAAS;6BAAC;YACN;QACJ;4BAAE,EAAE;IACJ,eAAe;QACX,MAAM,OAAK,QAAQ,IAAI;QACvB,IAAG,QAAM,IAAG;QACZ,IAAG;YACC,MAAM,MAAI,MAAM,wHAAG,CAAC,IAAI,CAAC,UAAS;gBAAC;YAAI;YACvC,SAAS,CAAC,OAAO;uBAAI;oBAAK,IAAI,IAAI,CAAC,IAAI;iBAAC;YACxC,WAAW;QACf,EACA,OAAM,KAAI;YACN,MAAM,wBAAsB;QAChC;IACJ;IACA,qBACI,6LAAC;QAAI,WAAU;kBACX,cAAA,6LAAC;sBAAG;;;;;;;;;;;AAGhB;GA1CwB;KAAA","debugId":null}},
    {"offset": {"line": 219, "column": 0}, "map": {"version":3,"sources":["file:///home/thanhnguyen/Documents/ChatApp/chatapp-frontend/lib/socket.ts"],"sourcesContent":["import {io} from \"socket.io-client\";\n\nconst socket=io(\"http://localhost:4000\", {\n    withCredentials:true\n})\n\nexport default socket;"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,SAAO,IAAA,wLAAE,EAAC,yBAAyB;IACrC,iBAAgB;AACpB;uCAEe","debugId":null}},
    {"offset": {"line": 236, "column": 0}, "map": {"version":3,"sources":["file:///home/thanhnguyen/Documents/ChatApp/chatapp-frontend/app/page.tsx"],"sourcesContent":["\"use client\";\n\nimport MessageInput from \"@/components/MessageInput\";\nimport Sidebar from \"@/components/Sidebar\";\nimport socket from \"@/lib/socket\";\nimport { useEffect, useState } from \"react\";\n\nexport default function Home() {\n  const [room]=useState(\"global\");\n  const [message,setMessage]=useState(\"\");\n  const [messages,setMessages]=useState<{sender:string;content:string}[]>([]);\n\n  useEffect(()=>{\n    socket.emit(\"join_room\",room);\n    socket.on(\"receive_message\", (msg) => {\n      setMessages((prev) => [...prev, msg]);\n    });\n    return () => {\n      socket.off(\"receive_message\");\n    };\n\n  },[room])\n  function sendMessage() {\n    if (message.trim() === \"\") return;\n    socket.emit(\"send_message\", { sender: \"Me\", content: message, room });\n    setMessages((prev) => [...prev, { sender: \"Me\", content: message }]);\n    setMessage(\"\");\n  }\n  return (\n    <div className=\"flex flex-col h-screen max-w-xl mx-auto\">\n      <Sidebar/>\n      <div className=\"flex-1 overflow-y-auto border p-3 space-y-2 bg-gray-50\">\n        {messages.map((m, i) => (\n          <div key={i} className=\"p-2 rounded-bg-white shadow\">\n            <b>{m.sender}: </b>{m.content}\n          </div>\n        ))}\n      </div>\n      <MessageInput onSend={sendMessage}/>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;;;AALA;;;;;AAOe,SAAS;;IACtB,MAAM,CAAC,KAAK,GAAC,IAAA,yKAAQ,EAAC;IACtB,MAAM,CAAC,SAAQ,WAAW,GAAC,IAAA,yKAAQ,EAAC;IACpC,MAAM,CAAC,UAAS,YAAY,GAAC,IAAA,yKAAQ,EAAmC,EAAE;IAE1E,IAAA,0KAAS;0BAAC;YACR,2HAAM,CAAC,IAAI,CAAC,aAAY;YACxB,2HAAM,CAAC,EAAE,CAAC;kCAAmB,CAAC;oBAC5B;0CAAY,CAAC,OAAS;mCAAI;gCAAM;6BAAI;;gBACtC;;YACA;kCAAO;oBACL,2HAAM,CAAC,GAAG,CAAC;gBACb;;QAEF;yBAAE;QAAC;KAAK;IACR,SAAS;QACP,IAAI,QAAQ,IAAI,OAAO,IAAI;QAC3B,2HAAM,CAAC,IAAI,CAAC,gBAAgB;YAAE,QAAQ;YAAM,SAAS;YAAS;QAAK;QACnE,YAAY,CAAC,OAAS;mBAAI;gBAAM;oBAAE,QAAQ;oBAAM,SAAS;gBAAQ;aAAE;QACnE,WAAW;IACb;IACA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC,oIAAO;;;;;0BACR,6LAAC;gBAAI,WAAU;0BACZ,SAAS,GAAG,CAAC,CAAC,GAAG,kBAChB,6LAAC;wBAAY,WAAU;;0CACrB,6LAAC;;oCAAG,EAAE,MAAM;oCAAC;;;;;;;4BAAO,EAAE,OAAO;;uBADrB;;;;;;;;;;0BAKd,6LAAC,yIAAY;gBAAC,QAAQ;;;;;;;;;;;;AAG5B;GAlCwB;KAAA","debugId":null}}]
}